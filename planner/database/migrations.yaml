mysql:
  types:
    handle:       varchar(24) not null
    name:         varchar(24)
    label:        varchar(255)
    text:         text not null
    datetime-utc: datetime
    boolean:      bool
    rating:       tinyint
    amount:       bigint
    latlong:      json
    enum:         enum
    url:          text

enums:
  owner:
    - admin
    - traveler

  stage:
    - research
    - plan
    - travel
    - done

  traveltype:
    - flight
    - train
    - bus
    - taxi
    - car
    - caravan
    - rentalcar
    - campervan
    - walk
    - hike
    - bicycle
    - scooter
    - boat
    - ferry
    - cruise

  hashtype:
    - password
    - resetcode

  infotype:
    - religion
    - islands
    - landmass
    - weather

  listtype:
    - todo
    - attractions
    - experiences
    - check
    - packing
    - eat
    - sleep

  status:
    - research
    - plan
    - booked
    - canceled
    - done



tables:

  owners:
    columns:
      handle:     handle
      email:      text
      active:     boolean
      type:       enum(owner)
      created-at: datetime-utc
    index: handle
    unique:
      - handle
      - email

  hashes:
    columns:
      handle: handle
      owner:  handle
      type:   enum(hashtype)
      valid:  boolean
      hash:   text
      created-at: datetime-utc
      last-used:  datetime-utc
    unique: handle
    trigger:
      deleted: owners--owner

  holidays:
    columns:
      handle: handle
      owner:  handle
      name:   text
      stage:  enum(stage)
      start-date: datetime-utc
      end-date:   datetime-utc
    index:
      - handle
      - owner
    unique: handle
    trigger:
      deleted: owners--owner

  continents:
    columns:
      handle:   handle
      name:     text
      type:     name
      topleft:  latlong
      botright: latlong
    unique: handle

  labels:
    columns:
      handle: handle
      name:   text
      type:   name
    unique:   handle

  countries:
    columns:
      handle:    handle
      continent: handle
      name:      text
      topleft:   latlong
      botright:  latlong
      flag:      url
      people:    amount
    unique: handle

  country-pivot:
    columns:
      holiday: handle
      country: handle
      owner:   handle
      stars:   rating
    trigger:
      deleted: owners--owner

  informations:
    columns:
      country: handle
      handle:  handle
      type:    enum(infotype)
      info:    text
    unique: handle

  travels: # flight details
    columns:
      handle:      handle
      owner:       handle
      type:        enum(traveltype)
      start-time:  datetime-utc
      start-spot:  handle
      end-time:    datetime-utc
      end-spot:    handle
      is-stopover: boolean
      connection:  handle
    index: handle
    trigger:
      deleted: owners--owner

  spots: # location on earth
    columns:
      handle:   handle
      location: latlong
      name:     label
      adres:    label
      city:     label
      country:  handle
    unique: handle
    trigger:
      deleted: travels--start-spot

  lists:
    columns:
      handle:   handle
      type:     enum(listtype)
      status:   enum(status)
      category: handle
      name:     text
    unique: handle


